
# üí∏ –°–±–æ—Ä –¥–µ–Ω–µ–≥ API üí∏

## –û–ø–∏—Å–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –¥–ª—è –∫–æ–º–∞–Ω–¥—ã –ü—Ä–æ–Ω–∏–Ω-team.

API —Å–µ—Ä–≤–∏—Å –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞—Ç—å –ì—Ä—É–ø–ø–æ–≤–æ–π —Å–±–æ—Ä –¥–µ–Ω–µ–≥. –°–±–æ—Ä –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –±–µ–∑ –≤–µ—Ä—Ö–Ω–µ–π –≥—Ä–∞–Ω–∏—Ü—ã. –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ —Å–æ–∑–¥–∞—Ç–µ–ª—é –ì—Ä—É–ø–ø–æ–≤–æ–≥–æ —Å–±–æ—Ä–∞.
–ü–ª–∞—Ç–µ–∂ –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å, –±—É–¥—É—á–∏ –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º.
–ü–ª–∞—Ç–µ–∂ –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å, —Å–∫—Ä—ã–≤–∞—è –¥–∞–Ω–Ω—ã–µ –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –¥–µ–Ω–µ–≥. –ï—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Å–≤–æ–∏ –ø–ª–∞—Ç–µ–∂–∏.
–ï—Å–ª–∏ –ø–ª–∞—Ç–µ–∂ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –æ—Ç –ª–∏—Ü–∞ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Ç–æ –¥–∞–Ω–Ω—ã–µ –æ –ø–æ—á—Ç–µ, –∏–º–µ–Ω–∏ –∏ —Ñ–∞–º–∏–ª–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–º–µ–Ω—è—Ç—Å—è –Ω–∞ —Ç–µ, —á—Ç–æ —É–∫–∞–∑–∞–Ω—ã –≤ –ø—Ä–æ—Ñ–∏–ª–µ.
–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ì—Ä—É–ø–ø–æ–≤–æ–≥–æ —Å–±–æ—Ä–∞ –∏–ª–∏ –ü–ª–∞—Ç–µ–∂–∞ –Ω–∞ –ø–æ—á—Ç—É —Å–æ–∑–¥–∞—Ç–µ–ª—è —Å–±–æ—Ä–∞/–ø–ª–∞—Ç–µ–∂–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç –ø–∏—Å—å–º–æ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± —É—Å–ø–µ—à–Ω–æ–º —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–±–æ—Ä–∞ (–æ—Ç–ø—Ä–∞–≤–∫–µ –ø–ª–∞—Ç–µ–∂–∞).

## –°—Ç—ç–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- [Django ](https://www.djangoproject.com/) ‚Äî —Ñ—Ä–µ–π–º–≤–æ—Ä–∫.
- [Django REST framework](https://www.django-rest-framework.org/) ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è REST API.
- [PostgreSQL](https://www.postgresql.org/) ‚Äî –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
- [Redis](https://redis.io/)  ‚Äî –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è GET –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º.
- [Celery](https://docs.celeryq.dev/en/stable/) ‚Äî –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ Email –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á.
- [Factory Boy](https://factoryboy.readthedocs.io/en/stable/) ‚Äî –¥–ª—è –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ë–î –º–æ–∫–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.
- [Docker](https://www.docker.com/) ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
- [Nginx](https://www.nginx.com/)  ‚Äî –¥–ª—è —Ä–∞–∑–¥–∞—á–∏ —Å—Ç–∞—Ç–∏–∫–∏ –≤ docker.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone https://github.com/blakkheart/collect_api_test_task.git
```
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞:
```bash
cd collect_api_test_task
```
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
   - Windows
   ```bash
   python -m venv venv
   source venv/Scripts/activate
   ```
   - Linux/macOS
   ```bash
   python3 -m venv venv
   source venv/bin/activate
   ```
4. –û–±–Ω–æ–≤–∏—Ç–µ [pip](https://pip.pypa.io/en/stable/):
   - Windows
   ```bash
   (venv) python -m pip install --upgrade pip
   ```
   - Linux/macOS
   ```bash
   (venv) python3 -m pip install --upgrade pip
   ```
5. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ —Ñ–∞–π–ª–∞ requirements.txt:
   ```bash
   (venv) pip install -r backend/requirements.txt
   ```
–°–æ–∑–¥–∞–π—Ç–µ –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–∞–π–ª `.env` –ø–æ –ø—Ä–∏–º–µ—Ä—É —Å —Ñ–∞–π–ª–æ–º `.env.example`, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.



## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ  

1. –í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –¥–æ–∫–µ—Ä-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
	```bash
	docker compose up
	```
2. –°–æ–∑–¥–∞–π—Ç–µ –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏: 
	```bash
	docker compose exec backend python manage.py makemigrations
	docker compose exec backend python manage.py migrate
	```
4. –°–æ–±–µ—Ä–∏—Ç–µ –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Ç–∞—Ç–∏–∫—É:
	```bash
	docker compose exec backend python manage.py collectstatic
	docker compose exec backend cp -r /app/static/. /backend_static/static
	```
C–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –ø–æ –∞–¥—Ä–µ—Å—É **localhost:8000** –∏ –≤—ã —Å–º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ API.

–î–æ—Å—Ç—É–ø–Ω—ã —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
 - **localhost:8000/api/v1/auth/users**   ‚Äî   POST –∑–∞–ø—Ä–æ—Å –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è c –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
	 ```json
	 {
	 "email": "string",
	 "username": "string"
	 "password": "string",
	 "first_name": "string",
	 "last_name": "string"
	 }
	 ```
  - **localhost:8000/api/v1/auth/token/login/**   ‚Äî   POST –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ c –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
	  ```json
	  {
	 "email": "string",
	 "password": "string"
	 }
	  ```
- **localhost:8000/api/v1/collections/**   ‚Äî   GET, POST –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –ì—Ä—É–ø–ø–æ–≤—ã—Ö —Å–±–æ—Ä–æ–≤ / —Å–æ–∑–¥–∞–Ω–∏—è —Å–±–æ—Ä–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
	 ```json
	{
	"title": "string",
	"reasons": {
	    "title": "string"
	  },
	"description": "string",
	"amount_to_collect": 2147483647,
	"cover_image": "string",
	"end_datetime": "2024-02-29T14:02:38.659Z"
	}
	```
 - **localhost:8000/api/v1/collections/{id}/**   ‚Äî GET, PATCH, DELETE –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è/ –∏–∑–º–µ–Ω–µ–Ω–∏—è (—Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä) –∏ —É–¥–∞–ª–µ–Ω–∏—è (—Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä) –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–±–æ—Ä–∞.
 -  **localhost:8000/api/v1/collections/{collection_id}/payments/**   ‚Äî GET –∏ POST –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–µ–π –¥–ª—è —Å–±–æ—Ä–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
	  ```json
      "amount": 2147483647,
      "invisible": true,
      "first_name_user": "string",
      "last_name_user": "string",
      "email_user": "user@example.com"
	  ```
-  **localhost:8000/api/v1/collections/{collection_id}/payments/{id}**   ‚Äî GET –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞.
 -  **localhost:8000/api/v1/reasons/**   ‚Äî GET –∏ POST –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–∏—á–∏–Ω –¥–ª—è —Å–±–æ—Ä–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∏—á–∏–Ω—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
	  ```json
      "title": "string"
	  ```
 -  **localhost:8000/api/v1/reasons/{id}**   ‚Äî GET –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–∏—á–∏–Ω—ã –¥–ª—è —Å–±–æ—Ä–∞.

- **localhost:8000/api/v1/user/payments/**   ‚Äî GET –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –ø–ª–∞—Ç–µ–∂–µ–π –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
 - **localhost:8000/api/v1/docs/** - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞.
- **localhost:8000/admin/** - –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞.

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ
–í—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∏–∑–º–µ–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –ø–æ –∞–¥—Ä–µ—Å—É **localhost:8000/admin/** :
``bash
docker compose exec backend python manage.py createsuperuser
``
–í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –Ω–∞–ø–æ–ª–Ω–∏—Ç—å –ë–î –ø—Ä–æ–µ–∫—Ç–∞ –º–æ–∫-–¥–∞—Ç–æ–π —Å –ø–æ–º–æ—â—å—é —Å–ª–µ–¥—É—é—â–µ–π –∫–æ–º–∞–Ω–¥—ã:
``bash
docker compose exec backend python manage.py load_mockdata
``
–° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `-a (--amount)` –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–¥–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–∫-–æ–±—ä–µ–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∑–∞–Ω–µ—Å–µ–Ω—ã –≤ –ë–î (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ 10).
–ù–∞–ø—Ä–∏–º–µ—Ä, —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã –Ω–∏–∂–µ –º–æ–∂–Ω–æ –∑–∞–Ω–µ—Å—Ç–∏ 100 –º–æ–∫-–æ–±—ä–µ–∫—Ç–æ–≤ –≤ –ë–î:	
``bash
docker compose exec backend python manage.py load_mockdata --amount 100
``